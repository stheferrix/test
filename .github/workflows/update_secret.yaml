# name: Update Secret Github CLI

# on:
#   workflow_dispatch:  # Permite que o workflow seja acionado manualmente

# jobs:
#   update-secret:
#     runs-on: ubuntu-latest
#     permissions: write-all

#     steps:
#       - name: Checkout repository
#         uses: actions/checkout@v4

#       - name: Install GitHub CLI
#         run: |
#           sudo apt-get install -y gh

#       - name: Authenticate with GitHub CLI
#         run: |
#           gh auth login --with-token <<< ${{ secrets.GITHUB_TOKEN }}

#       - name: Update GitHub Secret
#         env:
#           REPO: ${{ github.repository }}
#           NEW_SECRET_VALUE: 'TRUE'
#         run: |
#           gh variable set TEST_SECRET2 --body "$NEW_SECRET_VALUE" --repo "$REPO"

#       - name: Wait for 30 seconds
#         run: sleep 30

#       - name: Test GitHub Secret
#         run: |
#           echo "${{ vars.TEST_SECRET2 }}"

name: Set Repository Variable

on:
  workflow_dispatch:  # Allows manual triggering of the workflow

jobs:
  update_variable:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Install GitHub CLI
        run: |
          sudo apt-get install gh -y

      - name: Set Repository Variable
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}  # Set the token here
          NEW_VARIABLE_VALUE: "mudou1"  # Replace with the value you want to set
        run: |
          echo $GITHUB_TOKEN | gh auth login --with-token
          gh variable TEST_SECRET2 --value "$NEW_VARIABLE_VALUE" --repo ${{ github.repository }}
